"use strict";requirejs.config({paths:{jquery:"jquery-1.10.1.min"}}),requirejs(["jquery"],function(n){function o(){0==n(".jia").length&&(n("tbody").remove(),n("tfoot").remove(),n("thead .t1").remove())}function e(){$arr=[],$len=n(".ttd").size();for(var t=0;t<$len;t++)n(".ttd input").eq(t).prop("checked")&&$arr.push(t);return $arr}function r(t){for(var o=$price=0;o<t.length;o++){var e=n(".total").eq(o).text();console.log(e),e=n.trim(e),console.log(e),e=e.substring(1),console.log(e),$price+=parseInt(e),console.log($price)}n(".pp").html("￥&nbsp;"+$price.toFixed(2)),n(".pr span").html("￥&nbsp"+$price.toFixed(2))}function i(t){var o=t.parent().parent().prev().text();console.log(o),o=(o=n.trim(o)).substring(1),console.log(o);var e=o*t.parent().find("input").val();n(".total").html("￥&nbsp;"+e.toFixed(2))}n("#top").load("top-header.html #top"),n("#foot").load("foot.html #foot"),n("#guanyu").load("foot.html #guanyu"),n("#guanyu-x").load("foot.html #guanyu-x"),n("#banquan").load("foot.html #banquan"),n("tbody").on("click",".jia",function(){var t=n(this).prev().val();100<++t&&(t=100),n(this).prev().val(t),i(n(this)),r(e())}),n("tbody").on("click",".jian",function(){var t=n(this).next().val();--t<=1&&(t=1),n(this).next().val(t),i(n(this)),r(e())}),n("tbody").on("click",".del",function(){$msg=confirm("您确定要删除该行吗？"),$msg&&n(this).parent().remove(),o(),r(e())}),$isok=!0,n("thead .allchecked").on("click",function(){$isok?n("tbody input").prop("checked","checked"):(n("thead input").removeAttr("checked"),n("tbody input").removeAttr("checked")),$isok=!$isok,r(e())}),n("tbody").on("click",".ttd",function(){var t=e();t.length==n(".ttd").size()?n("thead input").prop("checked","checked"):n("thead input").removeAttr("checked"),r(t)}),n(".quanshan").on("click",function(){if($arr=e(),confirm("您确定要删除多行吗？")){for(var t=$arr.length-1;0<=t;t--)console.log(n("tbody input")),n("tbody input").eq($arr[t]).parent().parent().remove();o()}})});